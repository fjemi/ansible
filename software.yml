# install/remove software
 
 - name: install/remove packages
   hosts: localhost
   become: yes
   vars:
     tmp_dir: /home/femij/Desktop/playbooks/ansible-aur
   tasks:  
   
     - name: full system upgrade "pacman -Syu"
       pacman:
         update_cache: yes
         upgrade: yes
       register: system_upgrade
       ignore_errors: True
     - debug: 
         var: system_upgrade
       when: system_upgrade is failed   
   
     - name: install packages 
       pacman:
         name: "{{ item.name }}"
         state: present
       register: pkg_install
       ignore_errors: True
       loop:
         - { name: 'chromium' }
         - { name: 'gedit' }
         - { name: 'python' }
         - { name: 'python-flask' } 
         - { name: 'python-flask-migrate' }
         - { name: 'python-flask-marshmallow' }
         - { name: 'python-flask-restful' }
         - { name: 'python-flask-wtf' }
         - { name: 'python-sqlalchemy' }
         - { name: 'python-django' }
         - { name: 'python-matplotlib' }
         - { name: 'python-numpy' }
         - { name: 'python-pandas' }
         - { name: 'qemu' }
         - { name: 'qemu-arch-extra' }
         - { name: 'qemu-block-gluster' }
         - { name: 'qemu-block-iscsi' }
         - { name: 'qemu-block-rbd' }
         - { name: 'samba' }
         - { name: 'libvirt' }
         - { name: 'ansible' }
         - { name: 'etcher' }
         - { name: 'android-tools' }
         - { name: 'java-openjfx' }
         - { name: 'papirus-icon-theme' }
         - { name: 'gimp' }
         - { name: 'transmission-gtk' }
         - { name: 'gufw' }
         - { name: 'ufw' }
         - { name: 'yay' }
         - { name: 'kodi' }
         - { name: 'etckeeper' }
         - { name: 'python' }
         
     - debug: 
         var: pkg_install
       when: pkg_install is failed

     - name: remove packages
       pacman:
         name: "{{ item.name }}"
         state: absent
         recurse: yes
         force: yes
       register: pkg_remove
       ignore_errors: True
       loop:
         - { name: 'python-pip'}
         - { name: 'qbittorrent' }         
         
     - debug: 
         var: pkg_remove
       when: pkg_remove is failed
